# プリクラ印刷レイアウトツール

写真をプリクラサイズ（30mm × 40mm）で印刷用にレイアウトできるWebアプリケーションです。

## 🎯 主な機能

### ✅ 実装済み機能

#### 基本機能
- **複数用紙サイズ対応**: ハガキ(9枠)、L判(6枠)、2L判(16枠)、ましかく(4枠)
- **ドラッグ＆ドロップ**: 複数写真の一括アップロード対応
- **高解像度出力**: 300dpi印刷品質でPNG/JPEG出力

#### 画像編集機能
- **ズーム**: 50%〜300%（リセットボタン付き）
- **回転**: 90度単位で回転
- **パン（位置調整）**: ドラッグ/ピンチで位置調整
- **写真の入れ替え**: ドラッグで枠間移動

#### コメント機能
- 各写真に個別コメント入力
- フォント、サイズ、色のカスタマイズ
- ドラッグで位置、ピンチでサイズ調整

#### 日付機能
- EXIF情報から撮影日自動取得
- 表示位置・フォーマット選択
- 個別カスタマイズ対応

#### 🆕 新機能

1. **スタイリッシュな枠番号表示**
   - 初期画面の空き枠に大きく目立つ番号を表示
   - 円形背景付きのモダンなデザイン

2. **ロック機能**
   - 写真の移動・ズームをロック
   - コメントの移動・サイズをロック
   - 全ロック/全解除ボタン
   - 誤操作を防止

3. **チカチカ防止**
   - 写真・コメント移動時のプレビュー画面の点滅を解消
   - requestAnimationFrameとセッション管理で安定描画

4. **プロジェクト保存・読み込み**
   - 編集状態を.pklayoutファイルとして保存
   - LZ-String圧縮で16枚以上の写真も保存可能
   - すべての設定（コメント、日付など）を保持

5. **UI/UX改善**
   - ヘルプモーダル追加
   - キーボードショートカット対応（Ctrl+S, Ctrl+O, Escape）
   - ズームリセットボタン

### その他のオプション
- **切り取り線**: 線の太さ調整可能（0.1〜2px）

## 🎨 UI/UX

- モバイルファーストのレスポンシブデザイン
- タッチ操作完全対応（ピンチ、ドラッグ）
- スムーズなアニメーション
- 直感的な操作性

## ⌨️ キーボードショートカット

| ショートカット | 機能 |
|--------------|------|
| `Ctrl + S` | プロジェクト保存 |
| `Ctrl + O` | プロジェクト読み込み |
| `Escape` | モーダルを閉じる |

## 📁 ファイル構成

```
/
├── index.html      # メインアプリケーション（単一HTML）
└── README.md       # このドキュメント
```

## 🔧 技術スタック

- **Fabric.js**: キャンバス描画・操作
- **LZ-String**: データ圧縮（プロジェクト保存用）
- **Font Awesome**: アイコン
- **Google Fonts**: Noto Sans JP

## 📝 使い方

1. **写真を追加**: アップロードエリアをタップまたはドラッグ＆ドロップ
2. **編集**: 写真をタップして編集モーダルを開く
3. **調整**: ズーム、回転、位置を調整
4. **コメント/日付**: オプションから有効化して設定
5. **保存**: 「保存」ボタンで編集状態を保存
6. **ダウンロード**: PNG/JPEGで高品質出力

## 🚀 今後の開発予定

- [ ] 画像のフィルター効果
- [ ] フレーム/デコレーション追加
- [ ] 複数ページ対応
- [ ] クラウド保存機能

## 📄 エントリポイント

| パス | 説明 |
|------|------|
| `/` または `/index.html` | メインアプリケーション |

## 📅 更新履歴

- **v2.0** - ロック機能、プロジェクト保存、UI/UX改善
- **v1.0** - 初期リリース
